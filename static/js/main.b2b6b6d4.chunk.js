(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports={form:"other-id-form_form__3A4dT",heading:"other-id-form_heading__1M1BS",textarea:"other-id-form_textarea__nlgqQ",button:"other-id-form_button__FhdO6"}},14:function(e,t,n){e.exports={form:"message-form_form__1-4sx",input:"message-form_input__2WjEe",button:"message-form_button__3dUg8"}},17:function(e,t,n){e.exports={container:"container_container__AQddp",title:"container_title__2eTKJ"}},18:function(e,t,n){e.exports={status:"connection-status_status__pjtXu"}},19:function(e,t,n){e.exports={card:"id-card_card__2uAiN",label:"id-card_label__3irN_"}},20:function(e,t,n){e.exports={container:"chat-section_container__14xhy",title:"chat-section_title__3LP_d"}},21:function(e,t,n){e.exports={list:"message-list_list__eTF0W",listItem:"message-list_listItem__3eVs_"}},32:function(e,t,n){e.exports={container:"connection-display_container__2Iym-"}},35:function(e,t,n){e.exports=n(61)},40:function(e,t,n){},53:function(e,t){},55:function(e,t){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),o=n.n(c),s=(n(40),n(1)),i=n(17),u=n.n(i),l=n(32),m=n.n(l),f=n(2),d=n(18),b=n.n(d),_=function(e){var t=e.setIsConnected,n=Object(a.useContext)(f.a),c=Object(a.useState)("No Connection"),o=Object(s.a)(c,2),i=o[0],u=o[1];return Object(a.useEffect)(function(){n&&n.on("connect",function(){t(!0),u("Connected!!!")})},[n,t]),r.a.createElement("div",{className:b.a.container},r.a.createElement("p",{className:b.a.status},i))},p=n(19),v=n.n(p),E=function(e){var t=e.label,n=e.id;return r.a.createElement("div",{className:v.a.card},r.a.createElement("h2",{className:v.a.label},t),r.a.createElement("p",null,n?JSON.stringify(n):"No Id Found."))},O=function(){var e=Object(a.useContext)(f.a),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)(function(){e&&e.on("signal",function(e){"type"in e&&o(e)})},[e]),r.a.createElement(E,{label:"Your Id",id:c})},h=n(11),j=n.n(h),g=n(13),x=function(e){var t=e.setOtherId,n=Object(g.a)(""),c=Object(a.useContext)(f.a);return r.a.createElement("form",{className:j.a.form,onSubmit:function(e){e.preventDefault();var a=n.value.trim();if(a){var r=JSON.parse(a);t(r),console.log({otherId:r}),c.signal(a)}}},r.a.createElement("h2",{className:j.a.heading},"Other Id"),r.a.createElement("textarea",Object.assign({className:j.a.textarea},n)),r.a.createElement("button",{className:j.a.button},"save"))},N=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",null,n?r.a.createElement(E,{label:"Other Id",id:n}):r.a.createElement(x,{setOtherId:c}))},w=n(34),y=n(20),I=n.n(y),C=n(14),S=n.n(C),k=function(e){var t=e.addMessage,n=Object(a.useContext)(f.a),c=Object(g.a)("");return r.a.createElement("form",{className:S.a.form,onSubmit:function(e){e.preventDefault();var a=c.value;n.send(a),t(a),c.setValue("")}},r.a.createElement("input",Object.assign({className:S.a.input},c)),r.a.createElement("button",{className:S.a.button},"send"))},D=n(21),M=n.n(D),A=function(e){var t=e.messages;return r.a.createElement("ul",{className:M.a.list},t.map(function(e,t){return r.a.createElement("li",{key:t,className:M.a.listItem},e)}))},J=function(){var e=Object(a.useContext)(f.a),t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1],i=function(e){o(function(t){return[e].concat(Object(w.a)(t))})};return Object(a.useEffect)(function(){e&&e.on("data",function(e){var t=new TextDecoder("utf-8").decode(e);i(t)})},[e]),r.a.createElement("section",{className:I.a.container},r.a.createElement("h2",{className:I.a.title},"CHAT ROOM"),r.a.createElement(k,{addMessage:i}),r.a.createElement(A,{messages:c}))},T=function(){var e=Object(a.useRef)(),t=Object(a.useContext)(f.a),n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],i=c[1],u=t&&t.connected;Object(a.useEffect)(function(){t&&t.on("stream",function(t){var n=e.current;"srcObject"in n?n.srcObject=t:n.src=window.URL.createObjectURL(t),n.play(),i(!0)})},[t,i]);return r.a.createElement("div",{style:o&&u?{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:0,overflow:"hidden"}:{visibility:"hidden",height:0,width:0}},r.a.createElement("video",{ref:e,id:"video",width:"720",height:"560",autoplay:!0,muted:!0}))},B=function(e){var t=e.options,n=Object(a.useState)(),c=Object(s.a)(n,2),o=c[0],i=c[1];return r.a.createElement(f.b,{options:t},r.a.createElement("div",{className:m.a.container},r.a.createElement(_,{setIsConnected:i}),r.a.createElement(T,null),o&&r.a.createElement(J,null),r.a.createElement(O,null),r.a.createElement(N,null)))},R=n(4),U=n.n(R),W=n(15),F=n(8),H=n.n(F),L=function(){var e=Object(W.a)(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:!0,video:!0},e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(){return e.apply(this,arguments)}}(),P=function(e){var t=e.setOptions,n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],i=c[1],u=function(){var e=Object(W.a)(U.a.mark(function e(){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,L();case 3:n=e.sent,i(!1),t({initiator:!0,stream:n});case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(W.a)(U.a.mark(function e(){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,L();case 3:n=e.sent,i(!1),t({initiator:!1,stream:n});case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return o?r.a.createElement("div",{className:H.a.container},r.a.createElement("h1",null,"Initializing...")):r.a.createElement("div",{className:H.a.container},r.a.createElement("h1",{className:H.a.title},"Select user type"),r.a.createElement("button",{className:H.a.button,onClick:u},"Host"),r.a.createElement("button",{className:H.a.button,onClick:l},"Guest"))},V=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",{className:u.a.container},r.a.createElement("h1",{className:u.a.title},"Peer to Peer Video Chat Demo"),n?r.a.createElement(B,{options:n}):r.a.createElement(P,{setOptions:c}))};var q=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports={container:"user-type-select_container__2b1HD",title:"user-type-select_title__12hnM",button:"user-type-select_button__2qh8y"}}},[[35,1,2]]]);
//# sourceMappingURL=main.b2b6b6d4.chunk.js.map